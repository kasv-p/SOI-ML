{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <script type="text/javascript">
  function csrc()
  {
    console.log(document.getElementById("videoInput").src);
  if (document.getElementById("videoInput").src != "http://localhost:5000/" && document.getElementById("videoInput").src != "http://127.0.0.1:5000/")
  {
    console.log('lll');
    document.getElementById("videoInput").src = "";
  }
  else
  {
    console.log('kkk');
    document.getElementById("videoInput").src="http://localhost:5000/video";
  }
  }
  </script>


  <title>Emotion Detection</title>
</head>
<body>

  <nav class="container">
    <input id="nav-toggle" type="checkbox" />
    <div class="logo roll">Read<strong>Me</strong></div>
    <ul class="links">
      <li class="list">
        <a href="#home" class='font'>Home</a>
        <div class="home_underline"></div>
      </li>
      <li class="list">
        <a href="#webcam" class='font'>Detect Emotion</a>
        <div class="home_underline"></div>
      </li>
    </ul>
    <label for="nav-toggle" class="icon-burger">
      <div class="line"></div>
      <div class="line"></div>
    </label>
  </nav>
  <div class="" id='home'>
    <br><br><br>
  </div>
  <div class="rtext">
    <h2 class="record">Facial Emotion Recognition</h2><br>
    <lottie-player src="https://assets3.lottiefiles.com/packages/lf20_ivrg0kds.json"  background="transparent"  speed="1"  style="width:  750px; height: 300px; align:center;"  loop autoplay></lottie-player>

    <p class="showtext"  id = "webcam">Detect your emotions through webcam or by uploading photographs in the detect emotion section.</p>
  </div>
    <a href="#webcam"><button class="rbutton-1 sbutton" type="button">Use Webcam</button></a>
     <br><br>
     <a href="#image"><button class="rbutton-2 sbutton" type="button">Upload Image</button></a>

    <!-- <button class="rbutton-3 sbutton">Upload Video</button> -->
    <div class="mask-left">
  <h3>Detect through webcam</h3><br>
  <div class="container-result">
    We are a team of 2 students working on an facial expression recognition technology which uses convolutional neural networks to detect emotions in human faces.
     Emotion recognition provides benefits to many institutions and aspects of life. It is useful and important for security and healthcare purposes. Also, it is crucial for easy and simple detection of human feelings at a specific moment without actually asking them.
     Here we can detect a total of 7 emotions which includes happy, sad, fear, disgust, neutral, angry and surprise. We used FER-2013 dataset to train our model and got F1-score of 0.6231.
      <!-- &emsp;&emsp;<lottie-player src="https://assets3.lottiefiles.com/packages/lf20_d1GoCb.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop autoplay></lottie-player>&emsp;&emsp;&emsp; Happy -->
      <!-- &emsp;&emsp;&emsp;<lottie-player src="https://assets3.lottiefiles.com/packages/lf20_syxn7sbq.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop autoplay></lottie-player> <br> &emsp;&emsp;&emsp;&emsp; Angry -->
      <!-- <lottie-player src="https://assets3.lottiefiles.com/packages/lf20_lt5xlugl.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop autoplay></lottie-player> &emsp;&emsp;&emsp;&emsp; Sad  -->
      <!-- <lottie-player src="https://assets10.lottiefiles.com/packages/lf20_odh15kwd.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop autoplay></lottie-player> &emsp;&emsp;&emsp;&emsp; Neutral -->
      <!-- <br><lottie-player src="https://assets1.lottiefiles.com/packages/lf20_kDutfO.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop autoplay></lottie-player> <br><br>&emsp;&emsp;&emsp; Surprised -->
      <!-- <lottie-player src="https://assets3.lottiefiles.com/private_files/lf30_qolzpdwh.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop autoplay></lottie-player> <br>&emsp;&emsp;&emsp;&emsp; Fear -->
      <!-- <img src="static/disgust.gif" alt="disgust" width="300px" height="300px"> <br><br>&emsp;&emsp;&emsp;&emsp; Disgust -->
      <!-- <img src="../static/disgust.gif" alt="disgust" width="300px" height="300px"> <br><br>&emsp;&emsp;&emsp;&emsp; {{ emotion }} -->
  </div><br><br>
    <input type='submit' id ="image" name='stop' class="sbutton webbutton" onclick='csrc()' value="start/stop"/>

</div>
<div class="img-upload">
  <div class="drag-area">
    <div class="icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
    <header>Drag & Drop to Upload File</header>
    <span>OR</span>
    <form action="/handleUpload" method="post" enctype="multipart/form-data">
          &emsp;&emsp;&nbsp;<input type="file" name="photo" class="filec" value="Upload"/><br>
               &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<input type="submit" value="Upload"/>
       </form>
  </div>
  <div class="detect-i">
    Detect Via Uploading Image<br>
    <div class="detect-i-text">
      <!-- <br> -->
      <br><u style="font-size:25px">Emotions</u> <br><br>Angry : {{ang}} <br>Disgust : {{dis}} <br>Fear : {{fear}} <br>Happy :{{ happ }} <br>Sad : {{ sad }} <br>Surprise : {{ sup }} <br>
      Neutral : {{neu}}<br>
      <br>Dominant Emotion: {{domin}}<br>
    </div>
  </div>
  <div class="footer-development">
&emsp;&emsp;&emsp;&emsp;&emsp;Designed and Developed by Sahaja and Vyshnavi &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Copyright&copy;2022
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Source code is available&nbsp;<a href='https://github.com/kasv-p/SOI-ML'>here</a>
  </div>
</div>
<div class="mask">
  <img id="videoInput" autoplay="false" width="600px" height="430px" muted controls src="{{ url_for('video') }}">
</div>
</body>
</html>
{% endblock %}
